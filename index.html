<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cookers' Page</title>
    <style>
    </style>
    <link rel="stylesheet" type="text/css" href="styles.css">
  </head>
  <body>
    <h1>Hello World</h1>
    <p>I'm hosted with GitHub Pages. Look at my cool button!</p>
    <body>
      <div class="form-container">
        <label for="apiKey">Enter your API key:</label>
        <input type="text" id="apiKey" class="api-key-input" placeholder="Enter API key here">
        <button class="submit-button" onclick="submitApiKey()">Submit</button>
      </div>
      <div class="stats-container" id="statsContainer"></div>
      <button class="button" onclick="incrementCounter()">Click me!</button>
      <div class="counter" id="counter">0</div>
  
      <script>
        async function submitApiKey() {
            const apiKey = document.getElementById('apiKey').value;
            if (!apiKey) {
                alert("Please enter an API key.");
                return;
            }

            const url = `https://api.torn.com/user/?selections=battlestats&key=${apiKey}&comment=TryItPage`;

            try {
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error(`Error: ${response.statusText}`);
                }
                const data = await response.json();
                displayBattleStats(data);
            } catch (error) {
                console.error("Error fetching battle stats:", error);
                alert("Error fetching battle stats. Please check your API key and try again.");
            }
        }

        function displayBattleStats(data) {
            const statsContainer = document.getElementById('statsContainer');
            if (data.error) {
                statsContainer.innerText = `Error: ${data.error.error}`;
                return;
            }
            const formattedStrength = data.strength.toLocaleString();
            const formattedSpeed = data.speed.toLocaleString();
            const formattedDefense = data.defense.toLocaleString();
            const formattedDexterity = data.dexterity.toLocaleString();
            const formattedTotal = data.total.toLocaleString();

            const statsHtml = `
                <p>Strength: ${formattedStrength}</p>
                <p>Speed: ${formattedSpeed}</p>
                <p>Defense: ${formattedDefense}</p>
                <p>Dexterity: ${formattedDexterity}</p>
                <p>Total: ${formattedTotal}</p>
            `;
            statsContainer.innerHTML = statsHtml;
        }       
      </script>
    

    <!-- START WELCOME SECTION -->

    <section id="welcome-section" class="welcome-section">
      <h1>Hey I am Cookers</h1>
      <p>I am a developer, but not actually, because I have no job!</p>
      <p>Please give me a job.</p>
      <p>I am begging you.</p>
      <p>I am actually losing my mind.</p> 
      <p>I can't go on like this. </p>
      <img src = https://em-content.zobj.net/source/twitter/376/slightly-smiling-face_1f642.png
      width="900">
      <p> jk!!!</p>
      <a href="anotherpage.html">Go to Another Page</a>
      </section>

    <!-- END WELCOME SECTION -->

  </body>
</html>
